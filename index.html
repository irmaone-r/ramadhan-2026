<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Khatam Hub - Rika & Azka</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 pb-12">

    <!-- Header -->
    <header class="bg-emerald-800 text-white p-6 rounded-b-[2.5rem] shadow-lg sticky top-0 z-50">
        <div class="max-w-md mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-xl font-extrabold flex items-center gap-2 tracking-tight">
                    <i data-lucide="moon" class="w-6 h-6 text-yellow-300 fill-current"></i> KHATAM HUB
                </h1>
                <p class="text-[10px] opacity-80 font-bold uppercase tracking-widest mt-1 flex items-center gap-1">
                    <i data-lucide="map-pin" class="w-3 h-3"></i> JKT â†” BKL
                </p>
            </div>
            <div class="text-right">
                <div class="text-[10px] font-black opacity-60 uppercase mb-1">Menuju Lebaran</div>
                <div id="countdown" class="flex gap-2 justify-end font-bold">
                    <!-- Countdown injected here -->
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-md mx-auto p-4 space-y-6">
        
        <!-- Stats Card -->
        <section class="bg-white p-6 rounded-[2rem] shadow-sm border border-slate-100 space-y-6">
            <div class="flex justify-between items-center">
                <h3 class="text-xs font-black uppercase text-slate-400 tracking-widest flex items-center gap-2">
                    <i data-lucide="zap" class="w-4 h-4 text-yellow-500 fill-current"></i> Progress Ramadhan
                </h3>
                <span id="day-badge" class="bg-emerald-50 text-emerald-700 text-[10px] font-black px-3 py-1 rounded-full border border-emerald-100 uppercase">
                    Hari Ke-1
                </span>
            </div>

            <div class="space-y-6">
                <!-- Rika Stats -->
                <div class="space-y-2">
                    <div class="flex justify-between items-end">
                        <span class="text-sm font-black text-slate-700">RIKA (SAYA)</span>
                        <span class="text-lg font-black text-emerald-600"><span id="rika-count">0</span><span class="text-xs text-slate-300 ml-1">/ 30</span></span>
                    </div>
                    <div class="h-3 bg-slate-100 rounded-full overflow-hidden">
                        <div id="rika-bar" class="h-full bg-emerald-500 transition-all duration-700 w-0"></div>
                    </div>
                </div>

                <!-- Azka Stats -->
                <div class="space-y-2">
                    <div class="flex justify-between items-end">
                        <span class="text-sm font-black text-slate-700">AZKA</span>
                        <span class="text-lg font-black text-blue-600"><span id="azka-count">0</span><span class="text-xs text-slate-300 ml-1">/ 30</span></span>
                    </div>
                    <div class="h-3 bg-slate-100 rounded-full overflow-hidden">
                        <div id="azka-bar" class="h-full bg-blue-500 transition-all duration-700 w-0"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Motivational Alert -->
        <div class="bg-slate-900 text-white p-5 rounded-[1.5rem] flex items-center gap-4 border-l-4 border-emerald-500 shadow-xl">
            <i data-lucide="bell" class="w-6 h-6 text-emerald-400 flex-shrink-0"></i>
            <div>
                <h4 class="text-[10px] font-black text-emerald-400 uppercase tracking-widest mb-0.5">Target Hari Ini</h4>
                <p id="target-text" class="text-xs font-semibold opacity-90 leading-relaxed">
                    Semangat! Hari ini minimal harus selesai Juz 1 ya.
                </p>
            </div>
        </div>

        <!-- Checklist -->
        <div class="space-y-3">
            <h2 class="font-black text-slate-800 flex items-center gap-2 text-lg uppercase px-2 tracking-tight italic">
                <i data-lucide="calendar" class="w-5 h-5 text-emerald-600"></i> Checklist Tadarus
            </h2>
            
            <div id="juz-container" class="grid gap-3">
                <!-- Juz items injected by JS -->
            </div>
        </div>

    </main>

    <script>
        // Data & State
        const RAMADHAN_START = new Date('2026-03-19T00:00:00');
        const EID_TARGET = new Date('2026-03-20T00:00:00');
        
        let state = {
            rika: JSON.parse(localStorage.getItem('khatam_rika')) || {},
            azka: JSON.parse(localStorage.getItem('khatam_azka')) || {}
        };

        const SURAH_MAP = [
            "Al-Fatihah - Al-Baqarah 141", "Al-Baqarah 142 - 252", "Al-Baqarah 253 - Ali 'Imran 92",
            "Ali 'Imran 93 - An-Nisa 23", "An-Nisa 24 - 147", "An-Nisa 148 - Al-Ma'idah 81",
            "Al-Ma'idah 82 - Al-An'am 110", "Al-An'am 111 - Al-A'raf 87", "Al-A'raf 88 - Al-Anfal 40",
            "Al-Anfal 41 - At-Taubah 92", "At-Taubah 93 - Hud 5", "Hud 6 - Yusuf 52",
            "Yusuf 53 - Ibrahim 52", "Al-Hijr 1 - An-Nahl 128", "Al-Isra 1 - Al-Kahfi 74",
            "Al-Kahfi 75 - Ta Ha 135", "Al-Anbiya 1 - Al-Hajj 78", "Al-Mu'minun 1 - Al-Furqan 20",
            "Al-Furqan 21 - An-Naml 55", "An-Naml 56 - Al-'Ankabut 45", "Al-'Ankabut 46 - Al-Ahzab 30",
            "Al-Ahzab 31 - Yasin 27", "Yasin 28 - Az-Zumar 31", "Az-Zumar 32 - Fussilat 46",
            "Fussilat 47 - Al-Jathiyah 37", "Al-Ahqaf 1 - Adh-Dhariyat 30", "Adh-Dhariyat 31 - Al-Hadid 29",
            "Al-Mujadila 1 - At-Tahrim 12", "Al-Mulk 1 - Al-Mursalat 50", "An-Naba 1 - An-Nas 6"
        ];

        function updateCountdown() {
            const now = new Date();
            const distance = EID_TARGET.getTime() - now.getTime();
            const countdownEl = document.getElementById('countdown');
            
            if (distance > 0) {
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                countdownEl.innerHTML = `
                    <div class="bg-white/10 px-2 py-1 rounded-lg text-center"><span class="text-sm block">${days}</span><span class="text-[8px] opacity-60">HARI</span></div>
                    <div class="bg-white/10 px-2 py-1 rounded-lg text-center"><span class="text-sm block">${hours}</span><span class="text-[8px] opacity-60">JAM</span></div>
                `;
            }

            const diffTime = now.getTime() - RAMADHAN_START.getTime();
            let currentDay = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            currentDay = currentDay < 1 ? 1 : currentDay > 30 ? 30 : currentDay;
            
            document.getElementById('day-badge').innerText = `Hari Ke-${currentDay}`;
            document.getElementById('target-text').innerHTML = `Semangat! Hari ini minimal harus sudah selesai <span class="text-emerald-300">Juz ${currentDay}</span> ya.`;
            return currentDay;
        }

        function toggleJuz(juzId, person) {
            state[person][juzId] = !state[person][juzId];
            localStorage.setItem(`khatam_${person}`, JSON.stringify(state[person]));
            render();
        }

        function render() {
            const container = document.getElementById('juz-container');
            const currentDay = updateCountdown();
            container.innerHTML = '';

            let rikaTotal = 0;
            let azkaTotal = 0;

            for (let i = 1; i <= 30; i++) {
                const doneRika = state.rika[i];
                const doneAzka = state.azka[i];
                if (doneRika) rikaTotal++;
                if (doneAzka) azkaTotal++;

                const isTarget = i === currentDay;
                const item = document.createElement('div');
                item.className = `bg-white p-4 rounded-[1.5rem] border-2 transition-all flex items-center justify-between shadow-sm ${doneRika && doneAzka ? 'border-emerald-500 bg-emerald-50/10' : isTarget ? 'border-yellow-400 bg-yellow-50/20' : 'border-slate-50'}`;
                
                item.innerHTML = `
                    <div class="flex items-center gap-4">
                        <div class="w-10 h-10 rounded-xl flex items-center justify-center font-black text-sm ${doneRika && doneAzka ? 'bg-emerald-600 text-white' : 'bg-slate-100 text-slate-400'}">
                            ${i}
                        </div>
                        <div>
                            <div class="text-xs font-black text-slate-800 flex items-center gap-1.5 uppercase">
                                JUZ ${i} ${isTarget ? '<span class="text-[7px] bg-yellow-400 text-yellow-900 px-1.5 py-0.5 rounded-full">TARGET</span>' : ''}
                            </div>
                            <div class="text-[9px] text-slate-400 font-bold uppercase truncate max-w-[120px]">
                                ${SURAH_MAP[i-1]}
                            </div>
                        </div>
                    </div>
                    <div class="flex gap-4">
                        <button onclick="toggleJuz(${i}, 'rika')" class="flex flex-col items-center gap-1">
                            <div class="p-2 rounded-lg transition-colors ${doneRika ? 'bg-emerald-100 text-emerald-600' : 'bg-slate-50 text-slate-200'}">
                                <i data-lucide="${doneRika ? 'check-circle-2' : 'circle'}" class="w-4 h-4"></i>
                            </div>
                            <span class="text-[7px] font-black text-slate-400 uppercase">Rika</span>
                        </button>
                        <button onclick="toggleJuz(${i}, 'azka')" class="flex flex-col items-center gap-1">
                            <div class="p-2 rounded-lg transition-colors ${doneAzka ? 'bg-blue-100 text-blue-600' : 'bg-slate-50 text-slate-200'}">
                                <i data-lucide="${doneAzka ? 'check-circle-2' : 'circle'}" class="w-4 h-4"></i>
                            </div>
                            <span class="text-[7px] font-black text-slate-400 uppercase">Azka</span>
                        </button>
                    </div>
                `;
                container.appendChild(item);
            }

            // Update Stats
            document.getElementById('rika-count').innerText = rikaTotal;
            document.getElementById('azka-count').innerText = azkaTotal;
            document.getElementById('rika-bar').style.width = `${(rikaTotal/30)*100}%`;
            document.getElementById('azka-bar').style.width = `${(azkaTotal/30)*100}%`;
            
            lucide.createIcons();
        }

        // Init
        window.onload = render;
        setInterval(updateCountdown, 60000);
    </script>
</body>
</html>